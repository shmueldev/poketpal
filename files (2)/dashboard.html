<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FinanzaBot Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap" rel="stylesheet"/>
  <script>
    tailwind.config = {
      theme: { extend: { colors: { primary: '#9213ec' }, fontFamily: { sans: ['Sora','sans-serif'] } } }
    };
  </script>

  <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CSS VARIABLES â€” single source of truth
       Cambiarlas todas a la vez = transiciÃ³n
       perfectamente sincronizada en toda la UI
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    :root {
      --bg-app:       #09090b;   /* zinc-950 */
      --bg-surface:   #18181b;   /* zinc-900 */
      --bg-card:      #18181b;
      --bg-card-alt:  #27272a;   /* zinc-800 */
      --bg-input:     #27272a;
      --border:       #3f3f46;   /* zinc-700 */
      --border-light: #3f3f46;
      --text-primary: #ffffff;
      --text-muted:   #a1a1aa;   /* zinc-400 */
      --text-subtle:  #71717a;   /* zinc-500 */
      --divide:       #3f3f46;
      --shadow:       0 1px 3px rgba(0,0,0,.4);
      --transition:   background-color .25s ease, color .25s ease, border-color .25s ease;
    }
    :root.light {
      --bg-app:       #f4f4f5;
      --bg-surface:   #ffffff;
      --bg-card:      #ffffff;
      --bg-card-alt:  #f4f4f5;
      --bg-input:     #f4f4f5;
      --border:       #e4e4e7;
      --border-light: #e4e4e7;
      --text-primary: #18181b;
      --text-muted:   #71717a;
      --text-subtle:  #a1a1aa;
      --divide:       #e4e4e7;
      --shadow:       0 1px 3px rgba(0,0,0,.08);
    }

    /* Apply variables everywhere at once */
    *, *::before, *::after { box-sizing: border-box; font-family: 'Sora', sans-serif; }

    body          { background: var(--bg-app);     color: var(--text-primary); transition: var(--transition); overflow: hidden; }
    #sidebar      { background: var(--bg-surface);  border-color: var(--border); transition: width .3s cubic-bezier(.4,0,.2,1), var(--transition); }
    #main-header  { background: var(--bg-surface);  border-color: var(--border); transition: var(--transition); }
    .t-card       { background: var(--bg-card);     border: 1px solid var(--border); transition: var(--transition); }
    .t-card-alt   { background: var(--bg-card-alt); border: 1px solid var(--border); transition: var(--transition); }
    .t-input      { background: var(--bg-input);    border: 1px solid var(--border); color: var(--text-primary); transition: var(--transition); }
    .t-text       { color: var(--text-primary);     transition: color .25s ease; }
    .t-muted      { color: var(--text-muted);       transition: color .25s ease; }
    .t-subtle     { color: var(--text-subtle);      transition: color .25s ease; }
    .t-divide     { border-color: var(--border);    transition: border-color .25s ease; }
    .t-divider    { background: var(--divide); }

    /* â”€â”€ Sidebar collapsed (desktop) â”€â”€ */
    #sidebar.collapsed .nav-label    { opacity:0; width:0; overflow:hidden; pointer-events:none; }
    #sidebar.collapsed .sidebar-logo { opacity:0; width:0; overflow:hidden; pointer-events:none; }
    #sidebar.collapsed .menu-item-desk { justify-content:center; }
    #sidebar.collapsed .sidebar-bottom-btn { justify-content:center; }
    .nav-label, .sidebar-logo { transition: opacity .2s, width .3s; white-space:nowrap; }

    /* â”€â”€ Mobile sidebar: icon + label below â”€â”€ */
    @media (max-width:767px) {
      #sidebar { width:4.5rem !important; flex-shrink:0; }
      #sidebar .menu-item-desk { flex-direction:column; gap:2px; justify-content:center; align-items:center; padding:6px 4px; }
      #sidebar .nav-label { opacity:1 !important; width:auto !important; overflow:visible !important; pointer-events:auto !important; font-size:9px; text-align:center; }
      #sidebar .sidebar-logo { display:none; }
      #sidebar .sidebar-bottom-btn { flex-direction:column; gap:2px; justify-content:center; align-items:center; padding:6px 4px; }
      #sidebar .sidebar-bottom-btn .nav-label { font-size:9px; opacity:1 !important; width:auto !important; }
      #sidebarToggle { display:none; }
    }

    /* â”€â”€ Scrollbar â”€â”€ */
    ::-webkit-scrollbar { width:5px; }
    ::-webkit-scrollbar-track { background:transparent; }
    ::-webkit-scrollbar-thumb { background:#52525b; border-radius:99px; }

    /* â”€â”€ Bot bubble â”€â”€ */
    .bot-bubble { background:linear-gradient(135deg,#1e1230,#2a1842); border:1px solid rgba(146,19,236,.2); }

    /* â”€â”€ Animations â”€â”€ */
    @keyframes fadeUp  { from { opacity:0; transform:translateY(14px); } to { opacity:1; transform:translateY(0); } }
    @keyframes slideIn { from { opacity:0; transform:translateX(-10px); } to { opacity:1; transform:translateX(0); } }
    .anim-fade  { animation:fadeUp  .45s ease-out forwards; }
    .anim-slide { animation:slideIn .35s ease-out forwards; }

    /* â”€â”€ Menu active â”€â”€ */
    .menu-item.active { background:rgba(146,19,236,.15); color:#c084fc; }
    .menu-item.active .material-symbols-outlined { color:#9213ec; }

    /* â”€â”€ Theme toggle circle â”€â”€ */
    #themeToggleCircle { transition: transform .45s cubic-bezier(.4,0,.2,1); }
  </style>
</head>

<body>
<div class="h-screen flex overflow-hidden">

  <!-- â•â•â•â•â•â•â•â•â•â• SIDEBAR â•â•â•â•â•â•â•â•â•â• -->
  <aside id="sidebar"
    class="relative z-40 flex flex-col w-16 shrink-0 border-r collapsed"
    style="border-color:var(--border)">

    <div class="h-16 flex items-center justify-between px-3 border-b shrink-0" style="border-color:var(--border)">
      <span class="sidebar-logo font-bold text-purple-400 text-sm">FinanzaBot</span>
      <button id="sidebarToggle"
        class="w-8 h-8 flex items-center justify-center rounded-lg transition-colors t-muted hover:text-white shrink-0"
        style="transition:background .2s">
        <span class="material-symbols-outlined text-xl">menu</span>
      </button>
    </div>

    <nav class="flex-1 py-3 space-y-0.5 px-2 overflow-hidden">
      <button class="menu-item menu-item-desk w-full flex items-center gap-3 px-2 py-2.5 rounded-lg
                     transition-colors t-muted anim-slide"
        style="animation-delay:.1s;opacity:0" data-section="historial">
        <span class="material-symbols-outlined shrink-0 text-[20px]">folder_open</span>
        <span class="nav-label text-xs font-medium">Historial</span>
      </button>
      <button class="menu-item menu-item-desk w-full flex items-center gap-3 px-2 py-2.5 rounded-lg
                     transition-colors t-muted anim-slide"
        style="animation-delay:.2s;opacity:0" data-section="metas">
        <span class="material-symbols-outlined shrink-0 text-[20px]">track_changes</span>
        <span class="nav-label text-xs font-medium">Metas</span>
      </button>
      <button class="menu-item menu-item-desk w-full flex items-center gap-3 px-2 py-2.5 rounded-lg
                     transition-colors t-muted anim-slide"
        style="animation-delay:.3s;opacity:0" data-section="graficas">
        <span class="material-symbols-outlined shrink-0 text-[20px]">bar_chart</span>
        <span class="nav-label text-xs font-medium">GrÃ¡ficas</span>
      </button>
      <button class="menu-item menu-item-desk w-full flex items-center gap-3 px-2 py-2.5 rounded-lg
                     transition-colors t-muted anim-slide"
        style="animation-delay:.4s;opacity:0" data-section="bot">
        <span class="material-symbols-outlined shrink-0 text-[20px]">smart_toy</span>
        <span class="nav-label text-xs font-medium">Bot</span>
      </button>
    </nav>

    <div class="p-2 border-t shrink-0" style="border-color:var(--border)">
      <button class="sidebar-bottom-btn w-full flex items-center gap-3 px-2 py-2.5 rounded-lg
                     bg-purple-600 hover:bg-purple-700 transition-colors text-white">
        <span class="material-symbols-outlined shrink-0 text-[20px]">add</span>
        <span class="nav-label text-xs font-semibold">Nueva Meta</span>
      </button>
    </div>
  </aside>

  <!-- â•â•â•â•â•â•â•â•â•â• APP BODY â•â•â•â•â•â•â•â•â•â• -->
  <div id="app-body" class="flex flex-col flex-1 min-w-0">

    <header id="main-header"
      class="h-16 flex items-center justify-between px-6 shrink-0 border-b"
      style="border-color:var(--border)">
      <div></div>
      <div class="flex items-center gap-3">
        <!-- Theme toggle -->
        <button id="themeToggle"
          class="relative w-14 h-7 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2"
          style="focus-ring-offset-color:var(--bg-surface)" title="Cambiar tema">
          <div class="absolute inset-0 rounded-full bg-gradient-to-r from-purple-600 to-purple-700"></div>
          <div id="themeToggleCircle"
            class="absolute top-0.5 left-0.5 w-6 h-6 bg-white rounded-full shadow-lg flex items-center justify-center text-sm">
            <span id="themeIcon">ğŸŒ™</span>
          </div>
        </button>
        <span class="hidden sm:block text-sm font-medium t-muted">Alex Morgan</span>
        <div class="w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-purple-700 hover:scale-110
                    cursor-pointer transition-transform flex items-center justify-center text-xs font-bold text-white">AM</div>
      </div>
    </header>

    <main class="flex-1 overflow-y-auto">
      <div class="px-6 pt-6 pb-1">
        <h1 id="sectionTitle" class="font-bold text-xl tracking-tight t-text">Historial de Movimientos</h1>
        <p  id="sectionSubtitle" class="text-sm t-muted mt-0.5">Consulta tus transacciones recientes</p>
      </div>
      <div id="content" class="p-6 pt-4"></div>
    </main>
  </div>
</div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  HELPERS â€” tokens unificados
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// En lugar de isDarkTheme ? 'claseDark' : 'claseLight' en cada elemento,
// usamos clases semÃ¡nticas (.t-card, .t-muted, etc.) que reaccionan
// a la variable CSS en :root.  Solo queda isDarkTheme para los pocos
// casos que necesitan lÃ³gica (iconBg, bot-bubble...).
let isDarkTheme = true;

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  SIDEBAR
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const sidebar       = document.getElementById('sidebar');
const sidebarToggle = document.getElementById('sidebarToggle');

sidebarToggle.addEventListener('click', () => {
  if (window.innerWidth < 768) return;
  const collapsed = sidebar.classList.toggle('collapsed');
  sidebar.style.width = collapsed ? '4rem' : '16rem';
});

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  THEME
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const themeToggle       = document.getElementById('themeToggle');
const themeToggleCircle = document.getElementById('themeToggleCircle');
const themeIcon         = document.getElementById('themeIcon');
const content           = document.getElementById('content');
const sectionTitle      = document.getElementById('sectionTitle');
const sectionSubtitle   = document.getElementById('sectionSubtitle');

function applyTheme(dark, animate = true) {
  isDarkTheme = dark;

  // Un solo cambio de clase en <html> â†’ todas las CSS vars cambian juntas â†’ sin lag
  document.documentElement.classList.toggle('light', !dark);

  // Toggle circle
  themeToggleCircle.style.transform = dark ? 'translateX(0) rotate(0deg)' : 'translateX(28px) rotate(360deg)';
  if (animate) {
    setTimeout(() => { themeIcon.textContent = dark ? 'ğŸŒ™' : 'â˜€ï¸'; }, 220);
  } else {
    themeIcon.textContent = dark ? 'ğŸŒ™' : 'â˜€ï¸';
  }

  // Reload section with new colors (fade)
  const activeBtn = document.querySelector('.menu-item.active');
  if (activeBtn) {
    content.style.opacity   = '0';
    content.style.transform = 'translateY(8px)';
    setTimeout(() => {
      loadSection(activeBtn.dataset.section);
      content.style.transition = 'opacity .4s ease, transform .4s ease';
      content.style.opacity   = '1';
      content.style.transform = 'translateY(0)';
    }, 180);
  }
}

themeToggle.addEventListener('click', () => {
  isDarkTheme = !isDarkTheme;
  applyTheme(isDarkTheme, true);
  localStorage.setItem('theme', isDarkTheme ? 'dark' : 'light');
});

const saved = localStorage.getItem('theme');
if (saved) { isDarkTheme = saved === 'dark'; applyTheme(isDarkTheme, false); }

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  SECCIONES
//  TipografÃ­a unificada:
//    Card label â†’ text-xs font-semibold uppercase tracking-wide t-muted
//    Card value â†’ text-2xl font-bold t-text
//    Card trend â†’ text-xs font-medium
//    Section heading â†’ text-base font-semibold t-text
//    Body copy â†’ text-sm t-muted
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const sections = {

  // â”€â”€ HISTORIAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  historial: {
    title:    'Historial de Movimientos',
    subtitle: 'Consulta tus transacciones recientes',
    content: () => `

      <!-- Filtros -->
      <div class="t-card rounded-xl p-4 mb-4">
        <div class="flex flex-col lg:flex-row gap-3 items-center">
          <div class="w-full lg:flex-1 relative">
            <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-purple-400 text-[20px]">search</span>
            <input class="t-input w-full rounded-lg pl-10 pr-4 py-2.5 text-sm placeholder:t-muted focus:outline-none focus:ring-2 focus:ring-purple-500/50"
              placeholder="Buscar por concepto, referencia o IDâ€¦" type="text"/>
          </div>
          <div class="flex flex-wrap gap-2 w-full lg:w-auto">
            ${['category:CategorÃ­a','calendar_month:Rango de Fecha','filter_list:Tipo'].map(s=>{
              const [ic,lb] = s.split(':');
              return `<button class="t-card-alt flex items-center gap-1.5 px-3 py-2 rounded-lg text-xs font-semibold t-text hover:border-purple-500/50 transition-colors">
                <span class="material-symbols-outlined text-[16px] text-purple-400">${ic}</span>${lb}
                <span class="material-symbols-outlined text-[14px] t-muted">expand_more</span>
              </button>`;
            }).join('')}
            <button class="bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-lg transition-colors">
              <span class="material-symbols-outlined text-[20px]">download</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Tabla -->
      <div class="t-card rounded-xl overflow-hidden mb-4">
        <div class="overflow-x-auto">
          <table class="w-full text-left border-collapse">
            <thead>
              <tr class="t-card-alt text-purple-400 uppercase text-[10px] font-bold tracking-widest">
                <th class="px-5 py-3.5">Fecha</th>
                <th class="px-5 py-3.5">Concepto</th>
                <th class="px-5 py-3.5">CategorÃ­a</th>
                <th class="px-5 py-3.5 text-right">Monto</th>
                <th class="px-5 py-3.5 text-center">Acc.</th>
              </tr>
            </thead>
            <tbody>
              ${[
                { date:'12 Oct, 2023', time:'10:45 AM', name:'Curso: Inversiones 101', sub:'ID: FE-98234',        icon:'menu_book',   ib:'bg-blue-500/10',   ic:'text-blue-400',   cat:'EDUCACIÃ“N',  amt:'-$45.00',   ac:'text-red-400' },
                { date:'10 Oct, 2023', time:'03:20 PM', name:'Recarga de Saldo',       sub:'Transferencia Bancaria', icon:'add_card',  ib:'bg-green-500/10',  ic:'text-green-400',  cat:'DEPÃ“SITO',   amt:'+$200.00',  ac:'text-green-400' },
                { date:'08 Oct, 2023', time:'11:10 AM', name:'Meta: Ahorro Master',    sub:'AportaciÃ³n AutomÃ¡tica',  icon:'savings',   ib:'bg-orange-500/10', ic:'text-orange-400', cat:'AHORROS',    amt:'-$25.00',   ac:'text-red-400' },
                { date:'05 Oct, 2023', time:'09:00 AM', name:'Bono de Bienvenida',     sub:'PromociÃ³n Octubre',      icon:'redeem',    ib:'bg-purple-500/10', ic:'text-purple-400', cat:'RECOMPENSA', amt:'+$10.00',   ac:'text-green-400' },
              ].map((r,i)=>`
              <tr class="border-t t-divide hover:bg-purple-500/5 transition-colors">
                <td class="px-5 py-4 whitespace-nowrap">
                  <p class="text-sm font-semibold t-text">${r.date}</p>
                  <p class="text-xs t-muted">${r.time}</p>
                </td>
                <td class="px-5 py-4">
                  <div class="flex items-center gap-3">
                    <div class="size-9 rounded-full ${r.ib} ${r.ic} flex items-center justify-center shrink-0">
                      <span class="material-symbols-outlined text-[18px]">${r.icon}</span>
                    </div>
                    <div>
                      <p class="text-sm font-semibold t-text">${r.name}</p>
                      <p class="text-xs t-muted">${r.sub}</p>
                    </div>
                  </div>
                </td>
                <td class="px-5 py-4 whitespace-nowrap">
                  <span class="t-card-alt px-2.5 py-1 rounded-full text-[10px] font-bold t-muted">${r.cat}</span>
                </td>
                <td class="px-5 py-4 text-right">
                  <span class="text-sm font-bold ${r.ac}">${r.amt}</span>
                </td>
                <td class="px-5 py-4 text-center">
                  <button class="t-muted hover:text-purple-400 transition-colors">
                    <span class="material-symbols-outlined text-[20px]">more_vert</span>
                  </button>
                </td>
              </tr>`).join('')}
            </tbody>
          </table>
        </div>
        <div class="border-t t-divide px-5 py-3 flex items-center justify-between">
          <span class="text-xs t-muted">Mostrando 4 de 128 transacciones</span>
          <div class="flex gap-1.5">
            <button class="size-7 flex items-center justify-center rounded t-card-alt t-muted opacity-40" disabled>
              <span class="material-symbols-outlined text-sm">chevron_left</span>
            </button>
            <button class="size-7 flex items-center justify-center rounded bg-purple-600 text-white text-xs font-bold">1</button>
            <button class="size-7 flex items-center justify-center rounded t-card-alt t-muted text-xs font-bold">2</button>
            <button class="size-7 flex items-center justify-center rounded t-card-alt t-muted text-xs font-bold">3</button>
            <button class="size-7 flex items-center justify-center rounded t-card-alt t-muted">
              <span class="material-symbols-outlined text-sm">chevron_right</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Resumen -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-purple-600 p-5 rounded-xl text-white shadow-lg shadow-purple-500/20">
          <div class="flex items-center justify-between mb-3">
            <p class="text-xs font-semibold uppercase tracking-wide text-white/70">Balance Educativo</p>
            <span class="material-symbols-outlined text-white/50 text-[20px]">account_balance</span>
          </div>
          <p class="text-2xl font-bold">$1,240.50</p>
          <p class="text-xs text-white/60 mt-1 flex items-center gap-1">
            <span class="material-symbols-outlined text-sm">trending_up</span>+12% mes anterior
          </p>
        </div>
        ${[
          { lbl:'Gastos en Cursos', icon:'school',       val:'$345.00',  trend:'-5% este mes',         tc:'text-red-400'   },
          { lbl:'Metas Alcanzadas', icon:'emoji_events', val:'8 / 10',   trend:'Â¡Vas por buen camino!', tc:'text-green-400' },
        ].map(c=>`
        <div class="t-card p-5 rounded-xl">
          <div class="flex items-center justify-between mb-3">
            <p class="text-xs font-semibold uppercase tracking-wide t-muted">${c.lbl}</p>
            <span class="material-symbols-outlined text-purple-400 text-[20px]">${c.icon}</span>
          </div>
          <p class="text-2xl font-bold t-text">${c.val}</p>
          <p class="text-xs ${c.tc} mt-1">${c.trend}</p>
        </div>`).join('')}
      </div>
    `,
  },

  // â”€â”€ METAS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  metas: {
    title:    'Tus Metas',
    subtitle: 'Gestiona tus objetivos financieros',
    content: () => `

      <!-- Cards de metas -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
        ${[
          { label:'Fondo de Emergencia', goal:'$5,000',  saved:'$3,750', pct:75, offset:91.1  },
          { label:'Viaje a JapÃ³n',       goal:'$12,000', saved:'$4,800', pct:40, offset:218.6 },
          { label:'InversiÃ³n 2024',      goal:'$50,000', saved:'$7,500', pct:15, offset:309.7 },
        ].map(g=>`
        <div class="t-card p-6 rounded-xl flex flex-col items-center text-center">
          <div class="relative w-28 h-28 mb-4">
            <svg class="w-full h-full -rotate-90">
              <circle class="t-muted opacity-10" cx="56" cy="56" fill="transparent" r="50" stroke="currentColor" stroke-width="8"/>
              <circle cx="56" cy="56" fill="transparent" r="50" stroke="#9213ec"
                stroke-dasharray="314.2" stroke-dashoffset="${Math.round(314.2*(1-g.pct/100))}"
                stroke-width="8" stroke-linecap="round"
                style="filter:drop-shadow(0 0 6px #9213ec88)"/>
            </svg>
            <div class="absolute inset-0 flex items-center justify-center">
              <span class="text-xl font-bold t-text">${g.pct}%</span>
            </div>
          </div>
          <p class="text-sm font-semibold t-text mb-0.5">${g.label}</p>
          <p class="text-xs t-muted mb-3">Meta: ${g.goal}</p>
          <div class="border-t t-divide w-full pt-3 flex justify-between text-xs">
            <span class="t-muted">Ahorrado</span>
            <span class="font-bold text-purple-400">${g.saved}</span>
          </div>
        </div>`).join('')}
      </div>

      <!-- Progreso global -->
      <div class="t-card p-6 rounded-xl relative overflow-hidden mb-4">
        <div class="absolute top-0 right-0 p-6 opacity-5">
          <span class="material-symbols-outlined text-[96px]">account_balance</span>
        </div>
        <div class="relative z-10">
          <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-5">
            <div>
              <p class="text-base font-semibold t-text">Meta Global de Ahorro</p>
              <p class="text-xs t-muted mt-0.5">Progreso acumulado de todos tus objetivos</p>
            </div>
            <div class="text-right">
              <p class="text-3xl font-bold text-purple-400">62%</p>
              <p class="text-xs t-muted">Completado</p>
            </div>
          </div>
          <div class="w-full h-2.5 rounded-full overflow-hidden t-card-alt">
            <div class="h-full rounded-full bg-gradient-to-r from-purple-600 via-purple-400 to-purple-300"
              style="width:62%;box-shadow:0 0 12px rgba(146,19,236,.4)"></div>
          </div>
          <div class="flex justify-between mt-2.5 text-xs t-muted">
            <span>Actual: <strong class="t-text font-semibold">$32,450</strong></span>
            <span>Objetivo: <strong class="t-text font-semibold">$52,000</strong></span>
          </div>
        </div>
      </div>

      <!-- Stats inferiores -->
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        ${[
          { icon:'trending_up',  ib:'bg-green-500/10',  ic:'text-green-400',  lbl:'Ahorro mensual promedio', val:'$2,400.00' },
          { icon:'calendar_today', ib:'bg-purple-500/10', ic:'text-purple-400', lbl:'Estimado finalizaciÃ³n',   val:'Oct 2024' },
        ].map(s=>`
        <div class="t-card p-5 rounded-xl flex items-center gap-4">
          <div class="w-12 h-12 rounded-full ${s.ib} flex items-center justify-center ${s.ic} shrink-0">
            <span class="material-symbols-outlined">${s.icon}</span>
          </div>
          <div>
            <p class="text-xs t-muted">${s.lbl}</p>
            <p class="text-xl font-bold t-text">${s.val}</p>
          </div>
        </div>`).join('')}
      </div>
    `,
  },

  // â”€â”€ GRÃFICAS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  graficas: {
    title:    'AnÃ¡lisis Detallado',
    subtitle: 'Visualiza tus finanzas en tiempo real',
    content: () => `

      <!-- KPI cards -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
        ${[
          { lbl:'Total Balance',  icon:'account_balance', val:'$45,230', trend:'+5.2% este mes',  tc:'text-green-400' },
          { lbl:'Ahorro Mensual', icon:'savings',         val:'$2,150',  trend:'+1.2% vs mes ant.',tc:'text-green-400' },
          { lbl:'Retorno Inv.',   icon:'query_stats',     val:'+12.5%',  trend:'+0.8% anual',      tc:'text-green-400' },
        ].map(s=>`
        <div class="t-card p-5 rounded-xl">
          <div class="flex items-center justify-between mb-3">
            <p class="text-xs font-semibold uppercase tracking-wide t-muted">${s.lbl}</p>
            <span class="material-symbols-outlined text-purple-400 text-[20px]">${s.icon}</span>
          </div>
          <p class="text-2xl font-bold t-text">${s.val}</p>
          <p class="text-xs ${s.tc} mt-1 flex items-center gap-1">
            <span class="material-symbols-outlined text-sm">trending_up</span>${s.trend}
          </p>
        </div>`).join('')}
      </div>

      <!-- GrÃ¡ficos -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-4">

        <!-- LÃ­nea -->
        <div class="t-card lg:col-span-2 rounded-xl p-5">
          <div class="flex items-start justify-between mb-3">
            <div>
              <p class="text-sm font-semibold t-text">Tendencias del Mercado</p>
              <p class="text-xs t-muted mt-0.5">Valor de activos Â· Ãºltimos 6 meses</p>
            </div>
            <div class="flex gap-1.5">
              <button class="px-2.5 py-1 text-[10px] font-bold rounded-lg bg-purple-500/15 text-purple-400 border border-purple-500/20">6M</button>
              <button class="px-2.5 py-1 text-[10px] font-bold rounded-lg t-card-alt t-muted transition-colors hover:border-purple-500/30">1Y</button>
            </div>
          </div>
          <div class="flex items-baseline gap-2 mb-3">
            <p class="text-2xl font-bold t-text">$124,500</p>
            <span class="text-xs font-bold text-green-400">+14.2%</span>
          </div>
          <div class="h-48 w-full">
            <svg class="w-full h-full" preserveAspectRatio="none" viewBox="0 0 500 180">
              <defs>
                <linearGradient id="lg1" x1="0%" y1="0%" x2="0%" y2="100%">
                  <stop offset="0%" stop-color="#9213ec" stop-opacity=".25"/>
                  <stop offset="100%" stop-color="#9213ec" stop-opacity="0"/>
                </linearGradient>
              </defs>
              <path d="M0,150 Q50,130 100,140 T200,75 T300,90 T400,35 T500,55 L500,180 L0,180 Z" fill="url(#lg1)"/>
              <path d="M0,150 Q50,130 100,140 T200,75 T300,90 T400,35 T500,55"
                fill="none" stroke="#9213ec" stroke-linecap="round" stroke-width="2.5"/>
              <circle cx="100" cy="140" r="4" fill="#9213ec" stroke="white" stroke-width="1.5"/>
              <circle cx="200" cy="75"  r="4" fill="#9213ec" stroke="white" stroke-width="1.5"/>
              <circle cx="400" cy="35"  r="4" fill="#9213ec" stroke="white" stroke-width="1.5"/>
            </svg>
          </div>
          <div class="flex justify-between pt-3 border-t t-divide">
            ${['ENE','FEB','MAR','ABR','MAY','JUN'].map(m=>`<span class="text-[10px] font-bold t-muted">${m}</span>`).join('')}
          </div>
        </div>

        <!-- Barras -->
        <div class="t-card rounded-xl p-5">
          <div class="flex items-center justify-between mb-1">
            <p class="text-sm font-semibold t-text">Gastos Mensuales</p>
            <span class="material-symbols-outlined t-muted">more_vert</span>
          </div>
          <p class="text-2xl font-bold t-text">$3,200</p>
          <p class="text-xs text-red-400 mt-0.5 mb-4">-5.4% vs mes anterior</p>
          <div class="flex items-end justify-between gap-1.5 h-36">
            ${[
              {h:'65%',lbl:'ENE',a:false},{h:'40%',lbl:'FEB',a:false},
              {h:'85%',lbl:'MAR',a:true },{h:'55%',lbl:'ABR',a:false},{h:'70%',lbl:'MAY',a:false},
            ].map(b=>`
            <div class="flex-1 flex flex-col items-center gap-1.5">
              <div class="w-full ${b.a ? 'bg-purple-600 shadow-lg shadow-purple-500/30' : 'bg-purple-500/15'} rounded-t-md relative group transition-all" style="height:${b.h}">
                ${!b.a ? `<div class="absolute inset-0 bg-purple-500/30 rounded-t-md scale-y-0 group-hover:scale-y-100 origin-bottom transition-transform"></div>` : ''}
              </div>
              <span class="${b.a ? 'text-purple-400' : 't-muted'} text-[9px] font-bold">${b.lbl}</span>
            </div>`).join('')}
          </div>
        </div>
      </div>

      <!-- Portfolio -->
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4">

        <!-- Donut -->
        <div class="t-card rounded-xl p-5">
          <p class="text-sm font-semibold t-text mb-4">DistribuciÃ³n</p>
          <div class="relative flex items-center justify-center py-2">
            <svg class="w-36 h-36 -rotate-90">
              <circle class="t-muted opacity-10" cx="72" cy="72" fill="transparent" r="56" stroke="currentColor" stroke-width="14"/>
              <circle class="text-purple-500" cx="72" cy="72" fill="transparent" r="56" stroke="currentColor"
                stroke-dasharray="351.9" stroke-dashoffset="193" stroke-linecap="round" stroke-width="14"/>
              <circle class="text-indigo-400"  cx="72" cy="72" fill="transparent" r="56" stroke="currentColor"
                stroke-dasharray="351.9" stroke-dashoffset="281" stroke-linecap="round" stroke-width="14"/>
            </svg>
            <div class="absolute flex flex-col items-center">
              <span class="text-xl font-bold t-text">100%</span>
              <span class="text-[9px] t-muted uppercase tracking-wide">Activos</span>
            </div>
          </div>
          <div class="space-y-2 mt-4">
            ${[
              {dot:'bg-purple-500', lbl:'Acciones (STK)', pct:'45%'},
              {dot:'bg-indigo-400', lbl:'Cripto (BTC/ETH)',pct:'35%'},
              {dot:'bg-zinc-500',   lbl:'Bonos (BND)',    pct:'20%'},
            ].map(d=>`
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-2">
                <div class="size-2 rounded-full ${d.dot}"></div>
                <span class="text-xs t-muted">${d.lbl}</span>
              </div>
              <span class="text-xs font-bold t-text">${d.pct}</span>
            </div>`).join('')}
          </div>
        </div>

        <!-- Tabla activos -->
        <div class="t-card md:col-span-3 rounded-xl p-5 overflow-x-auto">
          <div class="flex items-center justify-between mb-4">
            <p class="text-sm font-semibold t-text">Rendimiento por CategorÃ­a</p>
            <button class="text-purple-400 text-xs font-bold flex items-center gap-0.5">
              Ver todo <span class="material-symbols-outlined text-[16px]">chevron_right</span>
            </button>
          </div>
          <table class="w-full text-left">
            <thead>
              <tr class="border-b t-divide text-[10px] font-bold uppercase tracking-wider t-muted">
                <th class="pb-3">Activo</th><th class="pb-3">Balance</th><th class="pb-3">24h</th><th class="pb-3">7d</th>
              </tr>
            </thead>
            <tbody>
              ${[
                {name:'Apple (AAPL)',       sub:'Stocks',         icon:'trending_up',     ib:'bg-green-500/10',  ic:'text-green-400',  bal:'$12,450', shares:'64.5 acc.', p:'+2.4%', pc:'text-green-400', path:'M0,25 L20,15 L40,20 L60,5 L80,10 L100,2',  lc:'text-green-400'},
                {name:'Bitcoin (BTC)',      sub:'Crypto',         icon:'currency_bitcoin',ib:'bg-orange-500/10', ic:'text-orange-400', bal:'$18,200', shares:'0.45 BTC',  p:'+5.1%', pc:'text-green-400', path:'M0,28 L20,20 L40,15 L60,25 L80,5 L100,0',  lc:'text-green-400'},
                {name:'Vanguard Bond ETF', sub:'Fixed Income',   icon:'description',     ib:'bg-blue-500/10',   ic:'text-blue-400',   bal:'$8,540',  shares:'120 acc.',  p:'-0.2%', pc:'text-red-400',   path:'M0,5 L20,8 L40,15 L60,10 L80,18 L100,22', lc:'text-red-400'},
              ].map(a=>`
              <tr class="border-t t-divide">
                <td class="py-3">
                  <div class="flex items-center gap-2.5">
                    <div class="size-9 rounded-lg ${a.ib} flex items-center justify-center ${a.ic} shrink-0">
                      <span class="material-symbols-outlined text-[18px]">${a.icon}</span>
                    </div>
                    <div>
                      <p class="text-sm font-semibold t-text">${a.name}</p>
                      <p class="text-[10px] t-muted">${a.sub}</p>
                    </div>
                  </div>
                </td>
                <td class="py-3">
                  <p class="text-sm font-semibold t-text">${a.bal}</p>
                  <p class="text-[10px] t-muted">${a.shares}</p>
                </td>
                <td class="py-3"><span class="text-xs font-bold ${a.pc}">${a.p}</span></td>
                <td class="py-3">
                  <svg class="w-20 h-7 ${a.lc}" viewBox="0 0 100 30">
                    <path d="${a.path}" fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"/>
                  </svg>
                </td>
              </tr>`).join('')}
            </tbody>
          </table>
        </div>
      </div>
    `,
  },

  // â”€â”€ BOT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  bot: {
    title:    'Asistente Financiero',
    subtitle: 'ObtÃ©n recomendaciones inteligentes',
    content: () => `

      <!-- Bienvenida -->
      <div class="t-card rounded-xl p-5 mb-4">
        <p class="text-sm t-muted mb-3">Hola Alex ğŸ‘‹ Â¿En quÃ© puedo ayudarte hoy?</p>
        <input type="text" placeholder="Escribe tu preguntaâ€¦"
          class="t-input w-full rounded-lg px-4 py-2.5 text-sm placeholder:t-muted focus:outline-none focus:ring-2 focus:ring-purple-500/50"/>
      </div>

      <!-- Chat -->
      <div class="flex flex-col gap-5 mb-4">

        <div class="flex items-start gap-3 max-w-2xl">
          <div class="w-8 h-8 rounded-full bg-purple-500/15 border border-purple-500/20 flex items-center justify-center shrink-0">
            <span class="material-symbols-outlined text-purple-400 text-[18px]">smart_toy</span>
          </div>
          <div>
            <div class="${isDarkTheme ? 'bot-bubble text-white' : 'bg-gray-100 text-gray-900'} px-4 py-3 rounded-2xl rounded-tl-none text-sm leading-relaxed">
              Â¡Hola! Soy tu asistente FinanzaBot. He detectado una oportunidad de ahorro del 12% optimizando tus suscripciones digitales. Â¿En quÃ© puedo ayudarte hoy?
            </div>
            <p class="text-[10px] t-muted mt-1 ml-1">10:42 AM</p>
          </div>
        </div>

        <div class="flex items-start gap-3 max-w-2xl self-end">
          <div class="text-right">
            <div class="bg-purple-600 px-4 py-3 rounded-2xl rounded-tr-none text-white text-sm leading-relaxed shadow-lg shadow-purple-500/15">
              Â¿Puedes analizar mi presupuesto de este mes y compararlo con el anterior?
            </div>
            <p class="text-[10px] t-muted mt-1 mr-1">10:43 AM</p>
          </div>
          <div class="w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center shrink-0 text-xs font-bold text-white">AM</div>
        </div>

        <div class="flex items-start gap-3 max-w-2xl">
          <div class="w-8 h-8 rounded-full bg-purple-500/15 border border-purple-500/20 flex items-center justify-center shrink-0">
            <span class="material-symbols-outlined text-purple-400 text-[18px]">smart_toy</span>
          </div>
          <div>
            <div class="${isDarkTheme ? 'bot-bubble text-white' : 'bg-gray-100 text-gray-900'} px-4 py-3 rounded-2xl rounded-tl-none text-sm leading-relaxed">
              Â¡Claro! Tus gastos en <strong class="text-purple-400">entretenimiento</strong> subieron un 15%, pero redujiste transporte en un 8%.
              <br/><br/>
              Saldo proyectado fin de mes:
              <span class="bg-purple-500/15 text-purple-400 px-2 py-0.5 rounded font-semibold">$1,240.50</span>
            </div>
            <div class="flex gap-2 mt-2">
              <button class="t-card-alt border t-divide px-3 py-1.5 rounded-lg flex items-center gap-1.5 text-xs t-text hover:border-purple-500/50 transition-colors">
                <span class="material-symbols-outlined text-[14px] text-purple-400">download</span>Descargar PDF
              </button>
            </div>
            <p class="text-[10px] t-muted mt-1 ml-1">10:44 AM</p>
          </div>
        </div>
      </div>

      <!-- Footer chat -->
      <div class="t-card rounded-xl p-5">
        <div class="flex flex-wrap gap-2 mb-4">
          ${[
            {icon:'analytics',       txt:'Analiza mis gastos'},
            {icon:'trending_up',     txt:'Proyectar ahorros'},
            {icon:'account_balance', txt:'Ver inversiones'},
            {icon:'receipt_long',    txt:'Ãšltimas facturas'},
          ].map(c=>`
          <button class="t-card-alt border t-divide px-3 py-1.5 rounded-full text-xs font-semibold t-text flex items-center gap-1.5 hover:border-purple-500/50 transition-colors">
            <span class="material-symbols-outlined text-[14px] text-purple-400">${c.icon}</span>${c.txt}
          </button>`).join('')}
        </div>
        <div class="relative flex items-center">
          <div class="absolute left-3 flex gap-1.5 t-muted">
            <button class="hover:text-purple-400 transition-colors"><span class="material-symbols-outlined text-[20px]">attach_file</span></button>
            <button class="hover:text-purple-400 transition-colors"><span class="material-symbols-outlined text-[20px]">sentiment_satisfied</span></button>
          </div>
          <input class="t-input w-full rounded-xl py-3.5 pl-20 pr-14 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500/50"
            placeholder="Hazme una pregunta sobre tus finanzasâ€¦" type="text"/>
          <button class="absolute right-2 w-9 h-9 bg-gradient-to-tr from-purple-600 to-purple-400 rounded-lg flex items-center justify-center text-white hover:brightness-110 transition-all shadow-lg shadow-purple-500/30">
            <span class="material-symbols-outlined text-[18px]">send</span>
          </button>
        </div>
        <p class="text-[10px] t-muted text-center mt-3">FinanzaBot puede cometer errores. Verifica la informaciÃ³n importante.</p>
      </div>
    `,
  },
};

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//  LOAD SECTION
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function loadSection(section) {
  const data = sections[section];
  content.style.cssText += ';opacity:0;transform:translateY(16px)';

  setTimeout(() => {
    sectionTitle.textContent    = data.title;
    sectionSubtitle.textContent = data.subtitle;
    content.innerHTML           = data.content();
    content.style.transition    = 'opacity .45s ease, transform .45s ease';
    requestAnimationFrame(() => {
      content.style.opacity   = '1';
      content.style.transform = 'translateY(0)';
    });
    document.querySelectorAll('.menu-item').forEach(item => {
      item.classList.toggle('active', item.dataset.section === section);
    });
  }, 260);
}

document.querySelectorAll('.menu-item').forEach(btn => {
  btn.addEventListener('click', () => loadSection(btn.dataset.section));
});

loadSection('historial');
</script>
</body>
</html>